{% extends "base.html" %}
{% load widget_tweaks %}

{% block content %}
<div class="container-md d-flex flex-column justify-content-center" style="height: 100vh;">
    <div class="d-flex p-5 border border-3 rounded-3 shadow-lg" style="margin-bottom: 60px;">
        <div class="px-5 d-flex justify-content-center">
            <img src={{book.image.url}} alt={{book.title}} style="height: 450px;">
        </div>
        <div class="d-flex flex-column">
            <div class="display-5 d-flex justify-content-center mb-4">
                {{book.title}}
            </div>
            <div class="d-flex justify-content-center mb-5">
                {{book.description}}
            </div>
            <div class="d-flex justify-content-center">
                <a href="#" class="btn btn-secondary col-md-5" style="text-decoration: none; ">Post a review for this book</a>
            </div>
        </div>
    </div>

    <div class="d-flex flex-column" style="margin-left: 20px; max-height: 600px; overflow-y: auto;">
        <div class="display-6 d-flex justify-content-center mb-4">
            Reviews
        </div>
    {% for review in reviews %}
        <div class="border border-2 rounded-3 p-3 mb-3">
            <div class="h5">
                {{review.user.username}} 
                <span class="h6 text-muted"> - on {{review.created|date:"M d, Y"}}</span>
            </div>
            <div>
                <!-- Star Rating -->
                <span style="color: #FFD700; font-size: 1.2em;">
                    {% for i in "12345" %}
                        {% if forloop.counter <= review.rating %}
                            &#9733;
                        {% else %}
                            &#9734;
                        {% endif %}
                    {% endfor %}
                </span>
            </div>
            <div>
                {{review.body}}
            </div>
        </div>
    {% empty %}
        <div class="text-muted">
            No reviews yet. Be the first to review this book!
        </div>
    {% endfor %}
</div>

{% endblock %}